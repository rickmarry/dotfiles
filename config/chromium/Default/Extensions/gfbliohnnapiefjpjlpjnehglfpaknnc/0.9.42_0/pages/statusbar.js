"use strict";var StatusBar=function(){var e={},t=null,n=Front.statusBar;return e.show=function(o,s,r){t&&(clearTimeout(t),t=null);var i=n.querySelectorAll("span");o<0?i.forEach(function(e){setInnerHTML(e,"")}):setInnerHTML(i[o],s);for(var a=-1,u=0;u<i.length;u++)i[u].innerHTML.length?(a=u,i[u].style.padding="0px 8px",i[u].style.borderRight="1px solid #999"):(i[u].style.padding="",i[u].style.borderRight="");a===-1?n.style.display="none":(i[a].style.borderRight="",n.style.display="block"),Front.flush(),r&&(t=setTimeout(function(){e.show(o,"")},r))},e}(),Find=function(){function e(){n=null,StatusBar.show(1,""),t.exit()}var t=new Mode("Find","/");t.addEventListener("keydown",function(e){e.sk_suppressed=!0}).addEventListener("mousedown",function(e){e.sk_suppressed=!0});var n,o;return t.open=function(){o=-1,StatusBar.show(1,'<input id="sk_find" class="sk_theme"/>'),n=Front.statusBar.querySelector("input"),n.oninput=function(){n.value.length&&"."!==n.value&&Front.visualCommand({action:"visualUpdate",query:n.value})};var s=[];runtime.command({action:"getSettings",key:"findHistory"},function(e){s=e.settings.findHistory}),n.onkeydown=function(t){if(Mode.isSpecialKeyOf("<Esc>",t.sk_keyName))e(),Front.visualCommand({action:"visualClear"});else if(t.keyCode===KeyboardUtils.keyCodes.enter){var r=n.value;r.length&&"."!==r&&(t.ctrlKey&&(r="\\b"+r+"\\b"),e(),runtime.updateHistory("find",r),Front.visualCommand({action:"visualEnter",query:r}))}else if((t.keyCode===KeyboardUtils.keyCodes.upArrow||t.keyCode===KeyboardUtils.keyCodes.downArrow)&&s.length){o=t.keyCode===KeyboardUtils.keyCodes.upArrow?o+1:o+s.length-1,o%=s.length;var r=s[o];n.value=r,Front.visualCommand({action:"visualUpdate",query:r}),t.preventDefault()}},n.focus(),t.enter()},t}();